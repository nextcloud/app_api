"use strict";(self.webpackChunkapp_api=self.webpackChunkapp_api||[]).push([["vendors-node_modules_mdi_js_mdi_js-node_modules_nextcloud_dialogs_dist_chunks_preview-BIbJGxX-e6bda3"],{228:t=>{var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,r,s,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new n(r,s||t,a),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],o]:t._events[u].push(o):(t._events[u]=o,t._eventsCount++),t}function a(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),o.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,a=new Array(s);n<s;n++)a[n]=r[n].fn;return a},o.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},o.prototype.emit=function(t,e,r,n,s,a){var o=i?i+t:t;if(!this._events[o])return!1;var u,c,h=this._events[o],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,n),!0;case 5:return h.fn.call(h.context,e,r,n,s),!0;case 6:return h.fn.call(h.context,e,r,n,s,a),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var d,v=h.length;for(c=0;c<v;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,r);break;case 4:h[c].fn.call(h[c].context,e,r,n);break;default:if(!u)for(d=1,u=new Array(l-1);d<l;d++)u[d-1]=arguments[d];h[c].fn.apply(h[c].context,u)}}return!0},o.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},o.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},o.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==e||n&&!o.once||r&&o.context!==r||a(this,s);else{for(var u=0,c=[],h=o.length;u<h;u++)(o[u].fn!==e||n&&!o[u].once||r&&o[u].context!==r)&&c.push(o[u]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o},1544:(t,e,i)=>{i.d(e,{A:()=>u});var r=i(641),n=i(953),s=i(33),a=i(3340);const o=["data-timestamp","title","textContent"],u=(0,r.pM)({__name:"NcDateTime",props:{timestamp:{},format:{default:()=>({timeStyle:"medium",dateStyle:"short"})},relativeTime:{type:[Boolean,String],default:"long"},ignoreSeconds:{type:Boolean}},setup(t){const e=t,i=(0,r.EW)(()=>({format:e.format})),u=(0,r.EW)(()=>({ignoreSeconds:e.ignoreSeconds,relativeTime:e.relativeTime||"long",update:!1!==e.relativeTime})),c=(0,a.a)((0,n.lW)(()=>e.timestamp),i),h=(0,a.S)((0,n.lW)(()=>e.timestamp),u),l=(0,r.EW)(()=>e.relativeTime?h.value:c.value);return(t,e)=>((0,r.uX)(),(0,r.CE)("span",{class:"nc-datetime",dir:"auto","data-timestamp":t.timestamp,title:(0,n.R1)(c),textContent:(0,s.v_)(l.value)},null,8,o))}})},2510:(t,e,i)=>{i.d(e,{A:()=>r.N});var r=i(8144)},5348:(t,e,i)=>{i.d(e,{g:()=>d,u:()=>v});var r=i(8040),n=i(3814),s=i(953),a=i(641),o=i(228);class u extends Error{name="TimeoutError";constructor(t,e){super(t,e),Error.captureStackTrace?.(this,u)}}const c=t=>t.reason??new DOMException("This operation was aborted.","AbortError");class h{#t=[];enqueue(t,e){const{priority:i=0,id:r}=e??{},n={priority:i,id:r,run:t};if(0===this.size||this.#t[this.size-1].priority>=i)return void this.#t.push(n);const s=function(t,e,i){let r=0,n=t.length;for(;n>0;){const s=Math.trunc(n/2);let a=r+s;i(t[a],e)<=0?(r=++a,n-=s+1):n=s}return r}(this.#t,n,(t,e)=>e.priority-t.priority);this.#t.splice(s,0,n)}setPriority(t,e){const i=this.#t.findIndex(e=>e.id===t);if(-1===i)throw new ReferenceError(`No promise function with the id "${t}" exists in the queue.`);const[r]=this.#t.splice(i,1);this.enqueue(r.run,{priority:e,id:t})}dequeue(){const t=this.#t.shift();return t?.run}filter(t){return this.#t.filter(e=>e.priority===t.priority).map(t=>t.run)}get size(){return this.#t.length}}const l=new class extends o{#e;#i;#r=0;#n;#s=!1;#a=!1;#o;#u=0;#c=0;#h;#l;#d;#v=[];#m=0;#t;#p;#f=0;#I;#y;#T=1n;#g=new Map;timeout;constructor(t){if(super(),!("number"==typeof(t={carryoverIntervalCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:h,strict:!1,...t}).intervalCap&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${t.intervalCap?.toString()??""}\` (${typeof t.intervalCap})`);if(void 0===t.interval||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${t.interval?.toString()??""}\` (${typeof t.interval})`);if(t.strict&&0===t.interval)throw new TypeError("The `strict` option requires a non-zero `interval`");if(t.strict&&t.intervalCap===Number.POSITIVE_INFINITY)throw new TypeError("The `strict` option requires a finite `intervalCap`");if(this.#e=t.carryoverIntervalCount??t.carryoverConcurrencyCount??!1,this.#i=t.intervalCap===Number.POSITIVE_INFINITY||0===t.interval,this.#n=t.intervalCap,this.#o=t.interval,this.#d=t.strict,this.#t=new t.queueClass,this.#p=t.queueClass,this.concurrency=t.concurrency,void 0!==t.timeout&&!(Number.isFinite(t.timeout)&&t.timeout>0))throw new TypeError(`Expected \`timeout\` to be a positive finite number, got \`${t.timeout}\` (${typeof t.timeout})`);this.timeout=t.timeout,this.#y=!1===t.autoStart,this.#C()}#L(t){for(;this.#m<this.#v.length;){const e=this.#v[this.#m];if(!(void 0!==e&&t-e>=this.#o))break;this.#m++}(this.#m>100&&this.#m>this.#v.length/2||this.#m===this.#v.length)&&(this.#v=this.#v.slice(this.#m),this.#m=0)}#w(t){this.#d?this.#v.push(t):this.#r++}#A(){this.#d?this.#v.length>this.#m&&this.#v.pop():this.#r>0&&this.#r--}#k(){return this.#v.length-this.#m}get#b(){return!!this.#i||(this.#d?this.#k()<this.#n:this.#r<this.#n)}get#S(){return this.#f<this.#I}#x(){this.#f--,0===this.#f&&this.emit("pendingZero"),this.#E(),this.emit("next")}#_(){this.#l=void 0,this.#V(),this.#H()}#q(t){if(this.#d){if(this.#L(t),this.#k()>=this.#n){const e=this.#v[this.#m],i=this.#o-(t-e);return this.#P(i),!0}return!1}if(void 0===this.#h){const e=this.#u-t;if(!(e<0))return this.#P(e),!0;if(this.#c>0){const e=t-this.#c;if(e<this.#o)return this.#P(this.#o-e),!0}this.#r=this.#e?this.#f:0}return!1}#P(t){void 0===this.#l&&(this.#l=setTimeout(()=>{this.#_()},t))}#M(){this.#h&&(clearInterval(this.#h),this.#h=void 0)}#R(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#E(){if(0===this.#t.size){if(this.#M(),this.emit("empty"),0===this.#f){if(this.#R(),this.#d&&this.#m>0){const t=Date.now();this.#L(t)}this.emit("idle")}return!1}let t=!1;if(!this.#y){const e=Date.now(),i=!this.#q(e);if(this.#b&&this.#S){const r=this.#t.dequeue();this.#i||(this.#w(e),this.#N()),this.emit("active"),r(),i&&this.#H(),t=!0}}return t}#H(){this.#i||void 0!==this.#h||this.#d||(this.#h=setInterval(()=>{this.#V()},this.#o),this.#u=Date.now()+this.#o)}#V(){this.#d||(0===this.#r&&0===this.#f&&this.#h&&this.#M(),this.#r=this.#e?this.#f:0),this.#z(),this.#N()}#z(){for(;this.#E(););}get concurrency(){return this.#I}set concurrency(t){if(!("number"==typeof t&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);this.#I=t,this.#z()}setPriority(t,e){if("number"!=typeof e||!Number.isFinite(e))throw new TypeError(`Expected \`priority\` to be a finite number, got \`${e}\` (${typeof e})`);this.#t.setPriority(t,e)}async add(t,e={}){return e={timeout:this.timeout,...e,id:e.id??(this.#T++).toString()},new Promise((i,r)=>{const n=Symbol(`task-${e.id}`);this.#t.enqueue(async()=>{let s;this.#f++,this.#g.set(n,{id:e.id,priority:e.priority??0,startTime:Date.now(),timeout:e.timeout});try{try{e.signal?.throwIfAborted()}catch(t){throw this.#$(),this.#g.delete(n),t}this.#c=Date.now();let r=t({signal:e.signal});if(e.timeout&&(r=function(t,e){const{milliseconds:i,fallback:r,message:n,customTimers:s={setTimeout,clearTimeout},signal:a}=e;let o,h;const l=new Promise((e,l)=>{if("number"!=typeof i||1!==Math.sign(i))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${i}\``);if(a?.aborted)return void l(c(a));if(a&&(h=()=>{l(c(a))},a.addEventListener("abort",h,{once:!0})),t.then(e,l),i===Number.POSITIVE_INFINITY)return;const d=new u;o=s.setTimeout.call(void 0,()=>{if(r)try{e(r())}catch(t){l(t)}else"function"==typeof t.cancel&&t.cancel(),!1===n?e():n instanceof Error?l(n):(d.message=n??`Promise timed out after ${i} milliseconds`,l(d))},i)}).finally(()=>{l.clear(),h&&a&&a.removeEventListener("abort",h)});return l.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},l}(Promise.resolve(r),{milliseconds:e.timeout,message:`Task timed out after ${e.timeout}ms (queue has ${this.#f} running, ${this.#t.size} waiting)`})),e.signal){const{signal:t}=e;r=Promise.race([r,new Promise((e,i)=>{s=()=>{i(t.reason)},t.addEventListener("abort",s,{once:!0})})])}const a=await r;i(a),this.emit("completed",a)}catch(t){r(t),this.emit("error",t)}finally{s&&e.signal?.removeEventListener("abort",s),this.#g.delete(n),queueMicrotask(()=>{this.#x()})}},e),this.emit("add"),this.#E()})}async addAll(t,e){return Promise.all(t.map(async t=>this.add(t,e)))}start(){return this.#y?(this.#y=!1,this.#z(),this):this}pause(){this.#y=!0}clear(){this.#t=new this.#p,this.#M(),this.#Z(),this.emit("empty"),0===this.#f&&(this.#R(),this.emit("idle")),this.emit("next")}async onEmpty(){0!==this.#t.size&&await this.#F("empty")}async onSizeLessThan(t){this.#t.size<t||await this.#F("next",()=>this.#t.size<t)}async onIdle(){0===this.#f&&0===this.#t.size||await this.#F("idle")}async onPendingZero(){0!==this.#f&&await this.#F("pendingZero")}async onRateLimit(){this.isRateLimited||await this.#F("rateLimit")}async onRateLimitCleared(){this.isRateLimited&&await this.#F("rateLimitCleared")}onError(){return new Promise((t,e)=>{const i=t=>{this.off("error",i),e(t)};this.on("error",i)})}async#F(t,e){return new Promise(i=>{const r=()=>{e&&!e()||(this.off(t,r),i())};this.on(t,r)})}get size(){return this.#t.size}sizeBy(t){return this.#t.filter(t).length}get pending(){return this.#f}get isPaused(){return this.#y}#C(){this.#i||(this.on("add",()=>{this.#t.size>0&&this.#N()}),this.on("next",()=>{this.#N()}))}#N(){this.#i||this.#a||(this.#a=!0,queueMicrotask(()=>{this.#a=!1,this.#Z()}))}#$(){this.#i||(this.#A(),this.#N())}#Z(){const t=this.#s;if(this.#i||0===this.#t.size)return void(t&&(this.#s=!1,this.emit("rateLimitCleared")));let e;if(this.#d){const t=Date.now();this.#L(t),e=this.#k()}else e=this.#r;const i=e>=this.#n;i!==t&&(this.#s=i,this.emit(i?"rateLimit":"rateLimitCleared"))}get isRateLimited(){return this.#s}get isSaturated(){return this.#f===this.#I&&this.#t.size>0||this.isRateLimited&&this.#t.size>0}get runningTasks(){return[...this.#g.values()].map(t=>({...t}))}}({concurrency:5});function d(t,e={}){e={size:32,cropPreview:!1,mimeFallback:!0,...e};try{const i=t.attributes?.previewUrl||(0,n.Jv)("/core/preview?fileId={fileid}",{fileid:t.fileid});let r;try{r=new URL(i)}catch{r=new URL(i,window.location.origin)}return r.searchParams.set("x",`${e.size}`),r.searchParams.set("y",`${e.size}`),r.searchParams.set("mimeFallback",`${e.mimeFallback}`),r.searchParams.set("a",!0===e.cropPreview?"0":"1"),r.searchParams.set("c",`${t.attributes.etag}`),r}catch{return null}}function v(t,e){const i=(0,s.KR)(null),n=(0,s.KR)(!1);return(0,a.nT)(()=>{n.value=!1,i.value=d((0,s.BA)(t),(0,s.BA)(e||{})),i.value&&(0,s.BA)(t).type===r.pt.File&&function(t){const{resolve:e,promise:i}=Promise.withResolvers();return l.add(()=>{const r=new Image;return r.onerror=()=>e(!1),r.onload=()=>e(!0),r.src=t,i}),i}(i.value.href).then(t=>{n.value=t})}),{previewURL:i,previewLoaded:n}}},9165:(t,e,i)=>{i.d(e,{Brj:()=>l,DvY:()=>u,EYN:()=>h,IyB:()=>n,K5o:()=>s,NZC:()=>a,VR:()=>d,ZL5:()=>v,bTm:()=>m,dgQ:()=>r,fEr:()=>c,hyP:()=>o});var r="M12,5A3.5,3.5 0 0,0 8.5,8.5A3.5,3.5 0 0,0 12,12A3.5,3.5 0 0,0 15.5,8.5A3.5,3.5 0 0,0 12,5M12,7A1.5,1.5 0 0,1 13.5,8.5A1.5,1.5 0 0,1 12,10A1.5,1.5 0 0,1 10.5,8.5A1.5,1.5 0 0,1 12,7M5.5,8A2.5,2.5 0 0,0 3,10.5C3,11.44 3.53,12.25 4.29,12.68C4.65,12.88 5.06,13 5.5,13C5.94,13 6.35,12.88 6.71,12.68C7.08,12.47 7.39,12.17 7.62,11.81C6.89,10.86 6.5,9.7 6.5,8.5C6.5,8.41 6.5,8.31 6.5,8.22C6.2,8.08 5.86,8 5.5,8M18.5,8C18.14,8 17.8,8.08 17.5,8.22C17.5,8.31 17.5,8.41 17.5,8.5C17.5,9.7 17.11,10.86 16.38,11.81C16.5,12 16.63,12.15 16.78,12.3C16.94,12.45 17.1,12.58 17.29,12.68C17.65,12.88 18.06,13 18.5,13C18.94,13 19.35,12.88 19.71,12.68C20.47,12.25 21,11.44 21,10.5A2.5,2.5 0 0,0 18.5,8M12,14C9.66,14 5,15.17 5,17.5V19H19V17.5C19,15.17 14.34,14 12,14M4.71,14.55C2.78,14.78 0,15.76 0,17.5V19H3V17.07C3,16.06 3.69,15.22 4.71,14.55M19.29,14.55C20.31,15.22 21,16.06 21,17.07V19H24V17.5C24,15.76 21.22,14.78 19.29,14.55M12,16C13.53,16 15.24,16.5 16.23,17H7.77C8.76,16.5 10.47,16 12,16Z",n="M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z",s="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z",a="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",o="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",u="M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z",c="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",h="M7 14C5.9 14 5 13.1 5 12S5.9 10 7 10 9 10.9 9 12 8.1 14 7 14M12.6 10C11.8 7.7 9.6 6 7 6C3.7 6 1 8.7 1 12S3.7 18 7 18C9.6 18 11.8 16.3 12.6 14H16V18H20V14H23V10H12.6Z",l="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z",d="M15,20A1,1 0 0,0 14,19H13V17H17A2,2 0 0,0 19,15V5A2,2 0 0,0 17,3H7A2,2 0 0,0 5,5V15A2,2 0 0,0 7,17H11V19H10A1,1 0 0,0 9,20H2V22H9A1,1 0 0,0 10,23H14A1,1 0 0,0 15,22H22V20H15M7,15V5H17V15H7Z",v="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",m="M21.41 11.58L12.41 2.58A2 2 0 0 0 11 2H4A2 2 0 0 0 2 4V11A2 2 0 0 0 2.59 12.42L11.59 21.42A2 2 0 0 0 13 22A2 2 0 0 0 14.41 21.41L21.41 14.41A2 2 0 0 0 22 13A2 2 0 0 0 21.41 11.58M13 20L4 11V4H11L20 13M6.5 5A1.5 1.5 0 1 1 5 6.5A1.5 1.5 0 0 1 6.5 5Z"}}]);
//# sourceMappingURL=app_api-vendors-node_modules_mdi_js_mdi_js-node_modules_nextcloud_dialogs_dist_chunks_preview-BIbJGxX-e6bda3.js.map?v=a993bf9c76f6f1c795bc